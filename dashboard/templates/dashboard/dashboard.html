{% load static %}
<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Trang ch·ªß</title>

    <link rel="stylesheet" href="{% static 'css/home.css' %}" />
  </head>

  <body>
    <!-- Header -->
    <header class="header">
      <div class="header-inner">
        <a class="logo" href="{% url 'dashboard' %}">
          <span class="logo-badge">M</span>
          <span>MilkStore</span>
        </a>

        <div class="search">
          <input type="text" placeholder="T√¨m s·ªØa, b·ªâm, vitamin..." />
          <span class="chip">Giao nhanh</span>
        </div>

        <div class="actions">
          {% if not request.session.account_id %}
          <a class="btn secondary" href="{% url 'to_login_page' %}"
            >ƒêƒÉng nh·∫≠p</a
          >
          <a class="btn primary" href="{% url 'to_register_page' %}">ƒêƒÉng k√≠</a>
          {% else %} {% load humanize %}
          <!--format ti·ªÅn ƒë·∫πp h∆°n thoi =))-->
          {% if account.role == "ADMIN" %}
          <a class="btn secondary" href="{% url 'to_admin_page' %}"
            >{{account.username}} -
            {{account.wallet.balance|floatformat:0|intcomma }} ƒë</a
          >
          {% else %}
          <a class="btn secondary" href="{% url 'to_profile_page' %}"
            >{{account.username}} -
            {{account.wallet.balance|floatformat:0|intcomma }} ƒë</a
          >
          {% endif %}

          <a class="cart" href="{% url 'to_view_cart' %}">
            üõí Gi·ªè h√†ng {% if total_cart_item and total_cart_item > 0 %}
            <span class="badge">{{ total_cart_item }}</span>
            {% endif %}
          </a>
          <a class="btn secondary" href="{% url 'logout' %}">ƒêƒÉng xu·∫•t</a>
          {% endif %}
        </div>
      </div>
    </header>

    <main class="wrap">
      <!-- Hero -->
      <section class="hero">
        <div>
          <h1>Web b√°n s·ªØa ch√≠nh h√£ng<br />gi√° t·ªët m·ªói ng√†y</h1>
          <p>
            Ch·ªçn s·ªØa ph√π h·ª£p cho b√© v√† gia ƒë√¨nh. ∆Øu ƒë√£i theo combo, giao nhanh,
            h·ªó tr·ª£ ƒë·ªïi tr·∫£.
          </p>
          <div class="hero-cta">
            <a class="btn primary" href="{% url 'to_view_cart' %}"
              >Xem gi·ªè h√†ng</a
            >
            {% if not request.session.account_id %}
            <a class="btn secondary" href="{% url 'to_login_page' %}"
              >ƒêƒÉng nh·∫≠p ƒë·ªÉ mua</a
            >
            {% endif %}
          </div>
        </div>
        <div class="hero-art" aria-label="banner"></div>
      </section>
      {% load humanize %}

      <section class="products">
        <h2 class="section-title">üçº S·∫£n ph·∫©m n·ªïi b·∫≠t</h2>

        <div class="product-grid">
          {% for product in products %}
          
          <div class="product-card">
            <a href="{% url 'view_product_detail' product.product_id%}">
            <img
              src="{{ product.image.url }}"
              alt="{{ product.product_name }}"
              style="width: 100px; height: 100px"
            />

            <h3>{{ product.product_name }}</h3>

            <p class="price">{{ product.price|floatformat:0|intcomma }} ƒë</p>
            </a>
            {% if request.session.account_id %}
            <form
              method="post"
              action="{% url 'add_to_cart' product.product_id 1 %}"
            >
              {% csrf_token %}
              <button class="btn primary">Th√™m v√†o gi·ªè</button>
            </form>
            {% else %}
            <a class="btn secondary" href="{% url 'to_login_page' %}">
              ƒêƒÉng nh·∫≠p ƒë·ªÉ mua
            </a>
            {% endif %}
          </div>
          {% empty %}
          <p>Ch∆∞a c√≥ s·∫£n ph·∫©m n√†o.</p>
          {% endfor %}
        </div>
      </section>
      <!-- Trust / info -->
      <section class="grid">
        <div class="card">
          <p class="card-title">‚úÖ H√†ng ch√≠nh h√£ng</p>
          <p class="card-sub">Cam k·∫øt ngu·ªìn g·ªëc r√µ r√†ng, h·∫°n d√πng minh b·∫°ch.</p>
        </div>
        <div class="card">
          <p class="card-title">üöö Giao nhanh</p>
          <p class="card-sub">Giao n·ªôi th√†nh nhanh, theo d√µi ƒë∆°n d·ªÖ d√†ng.</p>
        </div>
        <div class="card">
          <p class="card-title">üí≥ Thanh to√°n an to√†n</p>
          <p class="card-sub">H·ªó tr·ª£ nhi·ªÅu ph∆∞∆°ng th·ª©c, b·∫£o m·∫≠t th√¥ng tin.</p>
        </div>
      </section>
    </main>
  </body>
</html>
